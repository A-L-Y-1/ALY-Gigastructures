namespace = giga_amb

# monthly modifier update
country_event = {
	id = giga_amb.001
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		is_country_type = default
	}

	immediate = {
		if = {
			limit = {
				not = { has_country_flag = @giga_amb_init_flag }
			}
			giga_amb_apply_initial_country_modifiers = yes
		}

		giga_amb_recalculate_country_modifiers_and_consume = yes
	}
}

# mega built/upgraded/upgrade started
country_event = {
	id = giga_amb.101
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		is_country_type = default
	}

	immediate = {
		giga_amb_recalculate_split = yes # just recalculate the count
	}
}

# construction ship killed
country_event = {
	id = giga_amb.102
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		is_country_type = default

		fromfrom = {
			is_ship_class = shipclass_constructor
		}
	}

	immediate = {
		giga_amb_recalculate_split = yes # just recalculate the count
	}
}

# construction ship gets a new order
# unfortunately this can't just be for megas because the order could be cancelling a mega
ship_event = {
	id = giga_amb.103
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		from = {
			is_country_type = default
		}

		is_ship_class = shipclass_constructor
	}

	immediate = {
		from = {
			giga_amb_recalculate_split = yes # just recalculate the count
		}
	}
}

# full update on tech/trad/AP
country_event = {
	id = giga_amb.201
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_global_flag = @giga_amb_flag
		is_country_type = default
	}

	immediate = {
		giga_amb_recalculate_country_modifiers = yes
	}
}