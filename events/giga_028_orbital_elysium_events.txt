namespace = giga_elysium

planet_event = {
	id = giga_elysium.001
	hide_window = yes

	mean_time_to_happen = { years = 5 }

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_modifier = giga_elysium_host_planet
		num_unemployed >= 5
	}

	immediate = {
		add_deposit = d_giga_elysium_cottage_industry

		if = {
			limit = {
				owner = { not = { has_country_flag = giga_elysium_cottage_industry } }
			}

			# send full notification message
			owner = {
				set_country_flag = giga_elysium_cottage_industry
				country_event = {
					id = giga_elysium.002
					scopes = {
						from = root
					}
				}
			}
		}
		else = {
			# send little notification
			create_message = {
				type = GIGA_ELYSIUM_COTTAGE_INDUSTRY
				localization = MESSAGE_GIGA_ELYSIUM_COTTAGE_INDUSTRY
				days = 30
				target = this

				variable = {
					type = name
					localization = SYSTEM
					scope = solar_system
				}

				variable = {
					type = name
					localization = PLANET
					scope = this
				}
			}
		}
	}
}

country_event = {
	id = giga_elysium.002
	title = giga_elysium.002.name
	picture = GFX_evt_financial_instruments
	show_sound = event_default
	location = from

	desc = {
		trigger = {
			is_gestalt = no
		}
		text = giga_elysium.002.desc
	}
	desc = {
		trigger = {
			is_hive_empire = yes
		}
		text = giga_elysium.002.desc.hive
	}
	desc = {
		trigger = {
			is_machine_empire = yes
		}
		text = giga_elysium.002.desc.machine
	}

	option = {
		name = ACKNOWLEDGED

		tooltip = {
			from = {
				add_deposit = d_giga_elysium_cottage_industry
			}
		}
	}
}