building_giga_megaworkshop = {
	base_buildtime = @b1_time
	category = manufacturing

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {

		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		modifier = {
			job_giga_megaengineer_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	#upgrades = {
	#	building_giga_megaworkshop_hub
	#}

	prerequisites = {
		tech_basic_industry
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		text = job_giga_megaengineer_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		text = job_giga_megaengineer_desc
	}
}

building_giga_megaworkshop_hub = {
	base_buildtime = @b1_time
	category = manufacturing

	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}

	allow = {
		exists = owner
		custom_tooltip_fail = {
			text = building_giga_megaworkshop_hub_count_condition

			owner = {
				check_variable = {
					which = @giga_amb_hubs
					value < giga_amb_cap
				}
			}
		}
	}

	on_queued   = { if = { limit = { exists = owner } owner = { change_variable = { which = @giga_amb_hubs value =  1 } } } }
	on_unqueued = { if = { limit = { exists = owner } owner = { change_variable = { which = @giga_amb_hubs value = -1 } } } }
	on_destroy  = { if = { limit = { exists = owner } owner = { change_variable = { which = @giga_amb_hubs value = -1 } } } }

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		modifier = {

		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		modifier = {
			job_giga_megaengineer_add = 4
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	prerequisites = {
		tech_basic_industry
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_regular_empire = yes
			}
		}
		text = job_giga_megaengineer_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		text = job_giga_megaengineer_desc
	}
}