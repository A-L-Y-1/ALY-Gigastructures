vsbw_begin = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome

	enactment_time = 7200
	resources = {
		category = decisions
		cost = { 											
			# energy = 3000000
			# minerals = 3000000
			# alloys = 2000000
			# sr_dark_matter = 1500000
			# acot_sr_dark_energy = 1500000
			influence = 750
		}
	}

	potential = {
		has_global_flag = acot_activated
		is_planet_class = pc_birch
		owner = { 
			is_ai = no
			#has_technology = tech_dm_ancient_palace
			#has_technology = tech_acot_create_enigmapolis
		}
		NOR = { 
			has_modifier = birch_world_decaying
			has_modifier = aet_birch_world_poorly_mapped_1
			has_modifier = aet_birch_world_poorly_mapped_2
			has_modifier = aet_birch_world_poorly_mapped_3
			has_modifier = aet_birch_world_poorly_mapped_4 
			has_modifier = aet_birch_world_tech_debuff_1
			has_modifier = aet_birch_world_tech_debuff_2
			has_modifier = aet_birch_world_tech_debuff_3
			has_modifier = aet_birch_world_tech_debuff_4
		}
	}

	effect = {
		change_pc = pc_void_birch
		hidden_effect = {
			save_global_event_target_as = center_of_the_universe
			solar_system = {
				set_star_class = sc_void_birch_built
				set_asteroid_belt = {
					radius = 0
				}
				random_system_planet = {
					limit = { is_planet_class = pc_core_black_hole }
					set_planet_size = 5
				}
			}
			add_modifier = {
				modifier = giga_voidbirch_upgrade_fix
			}
			add_deposit = d_giga_void_birch_mechanics
			remove_district = district_giga_birch_structure
			add_district = district_void_birch_structure

			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_giga_birch_insula_orykta
				}
				variable = giga_void_birch_upgrade_orykta
			}
			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_giga_birch_insula_ktisma
				}
				variable = giga_void_birch_upgrade_ktisma
			}
			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_giga_birch_insula_physma
				}
				variable = giga_void_birch_upgrade_physma
			}

			remove_deposit = d_giga_birch_mechanics
			validate_planet_buildings_and_districts = yes

			set_update_modifiers_batch = begin
			set_update_modifiers_batch = end

			while = {
				count = giga_void_birch_upgrade_orykta
				add_district = district_void_birch_extraction
			}
			while = {
				count = giga_void_birch_upgrade_ktisma
				add_district = district_void_birch_nidavellir
			}
			while = {
				count = giga_void_birch_upgrade_physma
				add_district = district_void_birch_matrioshka
			}

			#remove_modifier = giga_voidbirch_upgrade_fix

			clear_variable = giga_birch_district_orykta_built
			clear_variable = giga_birch_district_orykta_energy_queued
			clear_variable = giga_birch_district_orykta_minerals_queued
			clear_variable = giga_birch_district_orykta_dark_matter_queued
			clear_variable = giga_birch_district_orykta_negative_energy_queued

			clear_variable = giga_birch_district_ktisma_built
			clear_variable = giga_birch_district_ktisma_foundry_queued
			clear_variable = giga_birch_district_ktisma_factory_queued
			clear_variable = giga_birch_district_ktisma_sentient_metal_queued
			clear_variable = giga_birch_district_ktisma_supertensiles_queued
			clear_variable = giga_birch_district_ktisma_refinery_queued

			clear_variable = giga_birch_district_physma_built
			clear_variable = giga_birch_district_physma_bureaucratic_queued
			clear_variable = giga_birch_district_physma_farm_queued
			clear_variable = giga_birch_district_physma_trade_queued
			clear_variable = giga_birch_district_physma_lab_queued

			owner = {
				country_event = {
					id = vsbw.1
					days = 1
				}
			}
		}
	}
}