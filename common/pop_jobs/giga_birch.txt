########################
####### Variables ######
########################
@insula_structure_manager_weight = 10
@insula_structure_engineer_weight = 5

@insula_manager_weight = 2
@insula_worker_weight = 0.5


########################
### Non-Gestalt Jobs ###
########################

##################################################################################################
# Structure operations

giga_birch_structure_manager = {
	category = ruler
	condition_string = RULER_JOB_TRIGGER
	building_icon = building_colony_shelter
	clothes_texture_index = 2
	
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_ruler_job

	possible = {
		owner = { is_fallen_empire = no }
	}

	planet_modifier = {
		job_giga_birch_structure_engineer_add = 10
	}

	resources = {
		category = planet_giga_birch_structure_managers
		produces = {
			unity = 3
			engineering_research = 5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			alloys = 5
			consumer_goods = 5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_ruler_weight|JOB|giga_birch_structure_manager|RESOURCE|unity|WEIGHT|0.35|RESOURCE2|engineering_research|WEIGHT2|0.65|
		mult = @insula_structure_manager_weight
	}
}

giga_birch_structure_engineer = {
	category = specialist
	condition_string = SPECIALIST_JOB_TRIGGER
	building_icon = building_luxury_residence
	clothes_texture_index = 2
	
	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_specialist_job

	possible = {
		owner = { is_fallen_empire = no }
	}

	planet_modifier = {
		planet_housing_add = 10
	}

	triggered_planet_modifier = {
		potential = { always = yes }
		planet_amenities_add = 8
		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
	}

	resources = {
		category = planet_giga_birch_structure_engineers
		produces = {
			unity = 1
			engineering_research = 2

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			consumer_goods = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_specialist_weight|JOB|giga_birch_structure_engineer|RESOURCE|unity|WEIGHT|0.34|RESOURCE2|engineering_research|WEIGHT2|0.66|AMENITIES|yes|
		mult = @insula_structure_engineer_weight
	}
}

##################################################################################################
# orykta

giga_birch_orykta_manager = {
	category = ruler
	condition_string = RULER_JOB_TRIGGER
	building_icon = building_giga_energy_nexus_1
	clothes_texture_index = 2
	
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		owner = { is_fallen_empire = no }
	}

	possible_precalc = can_fill_ruler_job

	triggered_planet_modifier = { 
		potential = { always = yes }

		planet_miners_minerals_produces_add = 1
		planet_technician_energy_produces_add = 1

		multiplier = planet.value:giga_job_scaling_plus_base
	}

	resources = {
		category = planet_giga_birch_insula_managers
		produces = { 
			physics_research = 5
			engineering_research = 5 

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			consumer_goods = 2

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_ruler_weight|JOB|giga_birch_orykta_manager|RESOURCE|physics_research|WEIGHT|0.5|RESOURCE2|engineering_research|WEIGHT2|0.5|
		mult = @insula_manager_weight
	}
}

giga_birch_orykta_worker = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_energy_grid
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_worker_job
	possible = {
		hidden_trigger = { exists = owner }
		owner = {
			is_gestalt = no
		}
	}

	resources = {
		category = planet_giga_birch_insula_workers
		produces = {
			energy = 2
			minerals = 2

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_robot_empire = yes
				}
			}
			energy = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_worker_weight|JOB|giga_birch_orykta_worker|RESOURCE|energy|WEIGHT|0.5|RESOURCE2|minerals|WEIGHT2|0.5|
		mult = @insula_worker_weight
	}
}

##################################################################################################
# Ktisma

giga_birch_ktisma_manager = {
	category = ruler
	condition_string = RULER_JOB_TRIGGER
	building_icon = building_nano_forge
	clothes_texture_index = 2
	
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		owner = { is_fallen_empire = no }
	}

	possible_precalc = can_fill_ruler_job

	planet_modifier = {
		planet_building_build_speed_mult = 0.20
	}

	triggered_planet_modifier = { 
		potential = { always = yes }

		planet_artisans_consumer_goods_produces_add = 1
		planet_artisans_minerals_upkeep_add = 1

		planet_metallurgists_alloys_produces_add = 1

		multiplier = planet.value:giga_job_scaling_plus_base
	}
	triggered_planet_modifier = { 
		potential = { exists = owner owner = { is_catalytic_empire = no } }
		planet_metallurgists_minerals_upkeep_add = 2

		multiplier = planet.value:giga_job_scaling_plus_base
	}
	triggered_planet_modifier = { 
		potential = { exists = owner owner = { is_catalytic_empire = yes } }
		planet_metallurgists_food_upkeep_add = 3

		multiplier = planet.value:giga_job_scaling_plus_base
	}

	resources = {
		category = planet_giga_birch_insula_managers
		produces = { 
			engineering_research = 5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			consumer_goods = 2

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_ruler_weight|JOB|giga_birch_ktisma_manager|RESOURCE|physics_research|WEIGHT|0.5|RESOURCE2|engineering_research|WEIGHT2|0.5|
		mult = @insula_manager_weight
	}
}

giga_birch_ktisma_worker = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_energy_grid
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_worker_job
	possible = {
		hidden_trigger = { exists = owner }
		owner = {
			is_gestalt = no
		}
	}

	resources = {
		category = planet_giga_birch_insula_workers
		produces = {
			consumer_goods = 1
			alloys = 0.5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			minerals = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_catalytic_empire = no }
			}
			minerals = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = { is_catalytic_empire = yes }
			}
			food = 1.5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_worker_weight|JOB|giga_birch_ktisma_worker|RESOURCE|alloys|WEIGHT|0.34|RESOURCE2|consumer_goods|WEIGHT2|0.66|
		mult = @insula_worker_weight
	}
}

##################################################################################################
# Physma

giga_birch_physma_manager = {
	category = ruler
	condition_string = RULER_JOB_TRIGGER
	building_icon = building_institute
	clothes_texture_index = 2
	
	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		owner = { is_fallen_empire = no }
	}

	possible_precalc = can_fill_ruler_job

	triggered_planet_modifier = { 
		potential = { always = yes }

		planet_farmers_food_produces_add = 1.5
		planet_researchers_physics_research_produces_add = 1
		planet_researchers_society_research_produces_add = 1
		planet_researchers_engineering_research_produces_add = 1
		planet_researchers_consumer_goods_upkeep_add = 0.5

		multiplier = planet.value:giga_job_scaling_plus_base
	}
	triggered_planet_modifier = { 
		potential = { exists = owner owner = { is_megacorp = no is_spiritualist = no } }

		planet_administrators_unity_produces_add = 1
		planet_administrators_consumer_goods_upkeep_add = 0.5

		multiplier = planet.value:giga_job_scaling_plus_base
	}
	triggered_planet_modifier = { 
		potential = { exists = owner owner = { is_megacorp = yes is_spiritualist = no } }

		planet_managers_unity_produces_add = 1
		planet_managers_consumer_goods_upkeep_add = 0.5

		multiplier = planet.value:giga_job_scaling_plus_base
	}
	triggered_planet_modifier = { 
		potential = { exists = owner owner = { is_spiritualist = yes } }

		planet_priests_unity_produces_add = 1
		planet_priests_consumer_goods_upkeep_add = 0.5

		multiplier = planet.value:giga_job_scaling_plus_base
	}

	resources = {
		category = planet_giga_birch_insula_managers
		produces = { 
			unity = 5
			society_research = 5

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		upkeep = {
			consumer_goods = 3

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		weight = value:giga_ruler_weight|JOB|giga_birch_physma_manager|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|society_research|WEIGHT2|0.5|
		mult = @insula_manager_weight
	}
}

giga_birch_physma_worker = {
	category = worker
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_energy_grid
	clothes_texture_index = 2

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible_precalc = can_fill_worker_job
	possible = {
		hidden_trigger = { exists = owner }
		owner = {
			is_gestalt = no
		}
	}

	resources = {
		category = planet_giga_birch_insula_workers
		produces = {
			unity = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}

		produces = {
			trigger = { is_robotic_species = no is_lithoid = no }
			food = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		produces = {
			trigger = { is_lithoid = yes }
			minerals = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
		produces = {
			trigger = { is_robotic_species = yes }
			energy = 1

			multiplier = planet.value:giga_job_scaling_plus_base
		}
	}

	weight = {
		modifier = {
			is_robotic_species = no
			is_lithoid = no
			weight = value:giga_worker_weight|JOB|giga_birch_physma_worker|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|food|WEIGHT2|0.5|
		}
		modifier = {
			is_lithoid = yes
			weight = value:giga_worker_weight|JOB|giga_birch_physma_worker|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|minerals|WEIGHT2|0.5|
		}
		modifier = {
			is_robotic_species = yes
			weight = value:giga_worker_weight|JOB|giga_birch_physma_worker|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|energy|WEIGHT2|0.5|
		}
		
		mult = @insula_worker_weight
	}
}


# ########################
# ### Gestalt Jobs #######
# ########################
# penrose_weaver_drone = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_nano_forge
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	resources = {
# 		category = planet_penrose
# 		produces = { sr_dark_matter = 2 }
# 		upkeep = {
# 			energy = 4
# 			minerals = 4
# 		}
# 	}

# 	possible_precalc = can_fill_drone_job

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|penrose_weaver_drone|RESOURCE|sr_dark_matter|STICKY|5|
# 	}
# }

# structure_drone = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_colony_shelter
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = {
# 		planet_housing_add = 30
# 	}

# 	triggered_planet_modifier = {
# 		potential = { always = yes }
# 		planet_amenities_no_happiness_add = 25
# 		mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
# 	}

# 	resources = {
# 		category = planet_infrastructure
# 		produces = {
# 			unity = 2
# 			engineering_research = 5
# 		}
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|structure_drone|RESOURCE|unity|WEIGHT|0.25|RESOURCE2|engineering_research|WEIGHT2|0.75|AMENITIES|yes|
# 		mult = @insula_structure_engineer_weight
# 	}
# }

# structure_process = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_colony_shelter
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = {
# 		planet_max_districts_add = 1
# 		job_structure_drone_add = 4
# 	}

# 	resources = {
# 		category = planet_infrastructure
# 		produces = {
# 			unity = 10
# 			engineering_research = 10
# 		}
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|structure_process|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|engineering_research|WEIGHT2|0.5|
# 		mult = @insula_structure_manager_weight
# 	}
# }

# structure_mind = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_colony_shelter
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = {
# 		planet_max_districts_add = 1
# 		job_structure_drone_add = 4
# 	}

# 	resources = {
# 		category = planet_infrastructure
# 		produces = {
# 			unity = 10
# 			engineering_research = 10
# 		}
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|structure_mind|RESOURCE|unity|WEIGHT|0.5|RESOURCE2|engineering_research|WEIGHT2|0.5|
# 		mult = @insula_structure_manager_weight
# 		#Never use factor < 1 for this
# 	}
# }

# bore_drone = {
# 	category = simple_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_nano_forge
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	resources = {
# 		category = planet_bore
# 		produces = { minerals = 90 }
# 		produces = {
# 			trigger = {
# 				planet = { has_active_building = building_mineral_purification_plant }
# 			}
# 			minerals = 10
# 		}
# 		produces = {
# 			trigger = {
# 				planet = { has_active_building = building_mineral_purification_hub }
# 			}
# 			minerals = 20
# 		}
# 	}

# 	weight = {
# 		weight = value:giga_menial_drone_weight|JOB|bore_drone|RESOURCE|minerals|
# 		mult = @insula_worker_weight
# 	}
# }

# bore_process = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_nano_forge
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = { job_bore_drone_add = 8 }

# 	resources = {
# 		category = planet_bore
# 		produces = { engineering_research = 50 }
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|bore_process|RESOURCE|engineering_research|
# 		mult = @insula_specialist_weight
# 	}
# }

# bore_mind = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_nano_forge
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = { job_bore_drone_add = 8 }

# 	resources = {
# 		category = planet_bore
# 		produces = { engineering_research = 50 }
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|bore_mind|RESOURCE|engineering_research|
# 		mult = @insula_specialist_weight
# 	}
# }

# penrose_drone = {
# 	category = simple_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_class_4_singularity
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	resources = {
# 		category = planet_penrose
# 		produces = { energy = 90 }
# 		produces = {
# 			trigger = { planet = { has_active_building = building_energy_grid } }
# 			energy = 10
# 		}
# 		produces = {
# 			trigger = { planet = { has_active_building = building_energy_nexus } }
# 			energy = 20
# 		}
# 	}

# 	weight = {
# 		weight = value:giga_menial_drone_weight|JOB|penrose_drone|RESOURCE|energy|
# 		mult = @insula_worker_weight
# 	}
# }

# penrose_process = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_class_4_singularity
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = { 
# 		job_penrose_drone_add = 8
# 		job_penrose_weaver_drone_add = 2
# 	}

# 	resources = {
# 		category = planet_penrose
# 		produces = { physics_research = 50 }
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|penrose_process|RESOURCE|physics_research|
# 		mult = @insula_specialist_weight
# 	}
# }

# penrose_mind = {
# 	category = complex_drone
# 	condition_string = DRONE_JOB_TRIGGER
# 	building_icon = building_class_4_singularity
# 	clothes_texture_index = 2
	
# 	possible_pre_triggers = {
# 		has_owner = yes
# 		is_being_purged = no
# 		is_being_assimilated = no
# 		is_sapient = yes
# 	}

# 	possible = {
# 		owner = { is_fallen_empire = no }
# 	}

# 	possible_precalc = can_fill_drone_job

# 	planet_modifier = { 
# 		job_penrose_drone_add = 8
# 		job_penrose_weaver_drone_add = 2
# 	}

# 	resources = {
# 		category = planet_penrose
# 		produces = { physics_research = 50 }
# 	}

# 	weight = {
# 		weight = value:giga_complex_drone_weight|JOB|penrose_mind|RESOURCE|physics_research|
# 		mult = @insula_specialist_weight
# 	}
# }